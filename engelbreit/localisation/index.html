<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>📍 Localisation Colocation Engelbreit</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

  <style>
    body {
      font-family: sans-serif;
      padding: 2rem 1rem;
      user-select: none;
    }

    h2 {
      text-align: center;
      margin-bottom: 1.5rem;
    }

    label {
      cursor: pointer;
    }

    .disabled {
      opacity: 0.5;
      pointer-events: none;
    }

    #image-container {
      text-align: center !important;
    }

    .img-preview {
      max-width: 100%;
      border-radius: 10px;
      box-shadow: 0 0 10px #ccc;
      margin-top: 1rem;
    }

    .map-link {
      text-align: right;
      margin-top: 0.5rem;
    }

    .radio-group label,
    .checkbox-group label {
      display: block;
      margin-bottom: 0.5rem;
    }

    .lieux a {
      display: inline-block;
      margin-bottom: 0.5rem;
    }

    @media (min-width: 576px) {
      .container-sm {
        max-width: 600px;
      }
    }

    input {
      margin-right: 0.5rem;
    }
  </style>
</head>

<body>
  <div class="container-md mx-auto">
    <h2>📍 Localisation Colocation Engelbreit</h2>

    <!-- <div class="lieux mb-3">
      <br />
      <a href=".." target="_blank">🔙 Retour sur la page de l'appartement</a>
    </div> -->

    <!-- Deux colonnes côte à côte -->
    <div class="row">
      <div class="mb-3"><label><input type="radio" name="lieu" value="zones" checked /> 📍 Découvrir Strasbourg - <a
            href="https://maps.app.goo.gl/AxjHrnnv6B2LRjrr8" target="_blank" style="font-style: italic;">Voir
            l'appartement sur 🗺️ Google
            Maps</a></label>
      </div>
      <div class="col-lg-4 col-6 mb-1">
        <strong>Destination depuis l'appartement :</strong>
        <div class="radio-group">
          <label><input type="radio" name="lieu" value="gare" /> 🚄 Gare</label>
          <label><input type="radio" name="lieu" value="fac" /> 🎓 Fac centrale Principale</label>
          <label><input type="radio" name="lieu" value="medecine" /> 🎓 Fac de médecine / Science Po</label>
          <label><input type="radio" name="lieu" value="centre" /> 🛍️ Centre ville</label>
          <label><input type="radio" name="lieu" value="supermarche" /> 🛒 Supermarché (Lidl)</label>
          <label><input type="radio" name="lieu" value="autoroute" /> 🚗 Autoroute</label>
        </div>
      </div>

      <div class="col-6 mb-1">
        <strong>Transport :</strong>
        <div class="checkbox-group">
          <label id="label-velo"><input type="checkbox" id="velo" /> 🚲 Vélo</label>
          <label id="label-tram"><input type="checkbox" id="tram" /> 🚋 Tram + 🚶🏻 marche </label><i>(la station
            <b>Virgile</b> au
            pied
            de l'immeuble sera ouverte le <a
              href="https://pokaa.fr/2025/04/27/projet-a-122-millions-de-a-strasbourg-on-sait-enfin-quand-sera-mis-en-service-le-tram-ouest/"
              target="_blank">15 novembre 2025</a>)</i>
          <label id="label-voiture"><input type="checkbox" id="voiture" /> 🚗 Voiture</label>
        </div>
      </div>
    </div>

    <div id="image-container"></div>
    <div class="map-link"><a id="map-link" href="#" target="_blank"></a></div>
  </div>

  <script>
    const lieuRadios = document.querySelectorAll('input[name="lieu"]');
    const velo = document.getElementById('velo');
    const tram = document.getElementById('tram');
    const voiture = document.getElementById('voiture');

    const labelVelo = document.getElementById('label-velo');
    const labelTram = document.getElementById('label-tram');
    const labelVoiture = document.getElementById('label-voiture');

    const imageContainer = document.getElementById('image-container');
    const mapLink = document.getElementById('map-link');

    const mapLinks = {
      'zones': './img/zones.jpg',
      'gare-velo': 'https://maps.app.goo.gl/shbDh4arpx5zZoZbA',
      // 'gare-tram': 'https://maps.app.goo.gl/',
      'gare-car': 'https://maps.app.goo.gl/D2boXdHAWfxKuuge6',
      'fac-velo': 'https://maps.app.goo.gl/FYH6koGoWwAJw94D7',
      // 'fac-tram': 'https://maps.app.goo.gl/',
      'fac-car': 'https://maps.app.goo.gl/dBpuLiapvw3fwy3YA',
      'medecine-velo': 'https://maps.app.goo.gl/gTUetJBFWe1sS39q6',
      // 'medecine-tram': 'https://maps.app.goo.gl/',
      'medecine-car': 'https://maps.app.goo.gl/XVYVu4yNLLLHKwwW8',
      'centre-velo': 'https://maps.app.goo.gl/teGsmFsRtVWm8nbX8',
      // 'centre-tram': 'https://maps.app.goo.gl/',
      'centre-car': 'https://maps.app.goo.gl/7R5akqH47bnmR8rB7',
      'supermarche-velo': 'https://maps.app.goo.gl/XKpiDKfkYr9Tnhhs8',
      'supermarche-tram': 'https://maps.app.goo.gl/qZdkCAxxgfAZuPXx7',
      'supermarche-car': 'https://maps.app.goo.gl/pYtjP2L7eGvkzReL6',
      'autoroute-car': 'https://maps.app.goo.gl/W8fd2vJFKtPhgBDs6',
    };

    function getSelectedLieu() {
      for (const radio of lieuRadios) {
        if (radio.checked) return radio.value;
      }
      return null;
    }

    function getTransportsDisponibles(lieu) {
      const transports = new Set();
      for (const key of Object.keys(mapLinks)) {
        const [lieuKey, transportKey] = key.split('-');
        if (lieuKey === lieu && transportKey) {
          transports.add(transportKey);
        }
      }
      return transports;
    }

    function updateTransports(lieu) {
      const transports = getTransportsDisponibles(lieu);

      const updateCheckbox = (input, label, code) => {
        const enabled = transports.has(code);
        input.disabled = !enabled;
        label.classList.toggle('disabled', !enabled);
        if (!enabled) input.checked = false;
      };

      updateCheckbox(velo, labelVelo, 'velo');
      updateCheckbox(tram, labelTram, 'tram');
      updateCheckbox(voiture, labelVoiture, 'car');

      if (!velo.checked && !tram.checked && !voiture.checked) {
        if (!velo.disabled) velo.checked = true;
        else if (!tram.disabled) tram.checked = true;
        else if (!voiture.disabled) voiture.checked = true;
      }
    }

    function getTransportSelection() {
      if (velo.checked) return 'velo';
      if (tram.checked) return 'tram';
      if (voiture.checked) return 'car';
      return null;
    }

    function update() {
      const lieu = getSelectedLieu();
      if (!lieu) return;

      updateTransports(lieu);

      const transport = getTransportSelection();
      const key = transport ? `${lieu}-${transport}` : lieu;
      const imagePath = `./img/${key}.jpg`;

      const hasLink = mapLinks.hasOwnProperty(key);
      imageContainer.innerHTML = hasLink
        ? `<img src="${imagePath}" alt="${key}" class="img-preview">`
        : '';
      mapLink.href = hasLink ? mapLinks[key] : '#';
      mapLink.textContent = hasLink ? '📌 Voir ce trajet sur 🗺️ Google Maps' : '';
    }

    lieuRadios.forEach(radio => radio.addEventListener('change', update));
    [velo, tram, voiture].forEach(input =>
      input.addEventListener('change', () => {
        if (input.checked) {
          [velo, tram, voiture].forEach(other => {
            if (other !== input) other.checked = false;
          });
        }
        update();
      })
    );

    window.addEventListener('DOMContentLoaded', update);
  </script>
</body>

</html>